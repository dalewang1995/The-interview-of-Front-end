# 什么是 DOCTYPE 及作用，写出 H5 的 DOCTYPE，解释 HTML4.0DOCTYPE 的两种类型。

1. 概念

DTD：是一系列语法规则，告诉浏览器 HTML 是什么文档类型，浏览器根据 DTD 来判断用什么样的引擎来解析和渲染 HTML。

DOCTYPE：用来声明文档类型和 DTD 规范，直接告诉浏览器 DTD 是哪个，主要用途是文件的合法性验证。

2. HTML4.0 两种类型

严格类型：不包括弃用的元素如 font，以该浏览器支持的最高标准运行。

传统类型：包括弃用的元素，页面以宽松的向后兼容的方式显示。

3. H5 的 DOCTYPE

`<!DOCTYPE html>`

HTML5 不基于 SGML，因此不需要对 DTD 进行引用，但是需要 doctype 来规范浏览器的行为。

# 浏览器内核

Chrome浏览器采用多进程架构，每个Tab页为一个独立的进程，浏览器内核是多线程的，通常分为：

* 渲染引擎线程：HTML解释器、CSS解释器、布局、网络、存储、图形等
  * HTML解释器：将HTML文档经过词法分析生成DOM树
  * CSS解释器：解析CSS文档，生成样式规则
  * 图层布局计算模块：布局计算每个对象的精确位置和大小
  * 视图绘制模块：进行具体节点的图形绘制，将像素渲染到屏幕上
* JS引擎线程：编译执行JS代码，与渲染引擎线程互斥
* 定时器触发线程：处理setTimeout、setInterval等定时器
* 异步HTTP请求线程：处理发送HTTP请求的线程，如Promise、AJAX
* 事件触发线程：将事件交给主线程（JS引擎）

# 从输入URL到页面加载完成的过程解析

1. DNS 解析url为对应的服务器ip
2. TCP 建立连接
3. HTTP 请求抛出
4. 服务端处理请求，HTTP 响应返回
5. 客户端拿到响应数据，解析响应内容，把解析的结果展示给用户

# 浏览器渲染过程解析

1. **解析HTML**：在解析HTML过程中发出页面渲染所需的各种外部资源请求，并生成DOM树

2. **计算样式**：识别并加载所有CSS样式信息与DOM树合并，最终生成render树（伪元素在这个环节被构建到DOM树中）

3. **计算图层布局**

4. **绘制图层**：浏览器根据DOM结果，把每一个页面图层转化为像素，并对所有媒体文件进行解码

5. **整合图层，显示页面**：浏览器合并各个图层，将数据由CPU输出给GPU最终绘制在屏幕上

# 什么是重排 Reflow，如何触发重排。

重排 Reflow：每个 HTML 元素都有自己的盒子，浏览器需要根据各种样式来计算，并根据计算结果来将元素放到它该有的位置。

触发 Reflow：修改 DOM 节点时、移动 DOM 位置或是实现动画、修改 CSS 样式、修改网页默认字体（性能问题）。

# 什么是重绘 Repaint，如何触发重绘。

重绘无法避免，只能最小程度的降低。

重绘 Repaint：将 HTML 元素根据 CSS 样式，并按照各自的特性绘制了一遍，展现在页面上。

触发 Repaint：修改 DOM 时和修改 CSS 样式时。
